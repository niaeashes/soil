type: object
properties:
  name:
    type: string
  fields:
    type: object
    patternProperties:
      "^[a-zA-Z0-9_]+$":
        oneOf:
        - $ref: '#/$defs/Field'
        - type: string
  subtypes:
    type: array
    items:
      $ref: '#/$defs/Subtype'
  endpoints:
    type: object
    patternProperties:
      "^\/[a-zA-Z0-9_\\-\\/]+$":
        parameters:
          type: object
          patternProperties:
            "^[a-zA-Z0-9_]$":
              $ref: '#/$defs/PathParameter'
        get:
          $ref: '#/$defs/Endpoint'
        post:
          $ref: '#/$defs/Endpoint'
        put:
          $ref: '#/$defs/Endpoint'
        patch:
          $ref: '#/$defs/Endpoint'
        delete:
          $ref: '#/$defs/Endpoint'
        head:
          $ref: '#/$defs/Endpoint'
required: [name]
$defs:
  Field:
    type: object
    properties:
      summary:
        type: string
      description:
        type: string
      annotation:
        type: string
        enum: [mutable, writer, reference]
      type:
        type: string
      enum:
        type: array
        items:
          type: string
    required: [type]
  Subtype:
    type: object
    properties:
      name:
        type: string
      fields:
        type: object
        patternProperties:
          "^[a-zA-Z0-9_]+$":
            oneOf:
            - $ref: '#/$defs/Field'
            - type: string
    required: [name]
  Endpoint:
    type: object
    properties:
      summary:
        type: string
        format: '^[A-Za-z0-9 ]$'
      description:
        type: string
      query:
        type: object
        patternProperties:
          "^[a-zA-Z0-9_]+$":
            oneOf:
              - $ref: '#/$defs/Query'
              - type: string
      request:
        $ref: '#/$defs/Subschema'
      success:
        $ref: '#/$defs/Subschema'
    required: [summary]
  Subschema:
    type: object
    properties:
      fields:
        type: object
        patternProperties:
          "^[a-zA-Z0-9_]+$":
            oneOf:
            - $ref: '#/$defs/Field'
            - type: string
  PathParameter:
    oneOf:
      - type: object
      - type: string
  Qyery:
    type: object
    properties:
      summary:
        type: string
      description:
        type: string
      default:
        anyOf:
          - type: string
          - type: integer
          - type: number
            format: double
      type:
        type: string
        enum: ['String', 'Integer', 'Number', 'Flag', 'Enum']
      enum:
        oneOf:
        - type: array
          items:
            type: string
        - type: string